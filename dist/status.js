 (function(g){function k(a,c,b){var d=window.location.origin;this.cancelable=this.cancelBubble=this.bubbles=!1;this.data=c||null;this.origin=d||"";this.lastEventId=b||"";this.type=a||"message"}if(!g.EventSource||g.K){var l=(g.K||"")+"EventSource",e=function(a,c){if(!a||"string"!=typeof a)throw new SyntaxError("Not enough arguments");this.URL=a;this.R(c);var b=this;setTimeout(function(){b.G()},0)};e.prototype={CONNECTING:0,OPEN:1,CLOSED:2,w:{F:!1,N:"eventsource",interval:500,m:262144,o:3E5,f:{evs_buffer_size_limit:262144},
J:{Accept:"text/event-stream","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}},R:function(a){var c=this.w,b;for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b]);for(b in a)b in c&&a.hasOwnProperty(b)&&(this[b]=a[b]);this.f&&this.m&&(this.f.evs_buffer_size_limit=this.m);if("undefined"===typeof console||"undefined"===typeof console.log)this.F=!1},log:function(a){this.F&&console.log("["+this.N+"]:"+a)},G:function(){try{this.readyState!=this.CLOSED&&(this.v(),this.readyState=this.CONNECTING,
this.cursor=0,this.cache="",this.c=new this.h(this),this.H())}catch(a){this.log("There were errors inside the pool try-catch"),this.dispatchEvent("error",{type:"error",data:a.message})}},j:function(a){var c=this;c.readyState=c.CONNECTING;c.dispatchEvent("error",{type:"error",data:"Reconnecting "});this.i=setTimeout(function(){c.G()},a||0)},v:function(){this.log("evs cleaning up");this.i&&(clearInterval(this.i),this.i=null);this.g&&(clearInterval(this.g),this.g=null);this.c&&(this.c.abort(),this.c=
null)},H:function(){if(this.o){this.g&&clearInterval(this.g);var a=this;this.g=setTimeout(function(){a.log("Timeout! silentTImeout:"+a.o);a.j()},this.o)}},close:function(){this.readyState=this.CLOSED;this.log("Closing connection. readyState: "+this.readyState);this.v()},l:function(){var a=this.c;if(a.D()&&!a.B()){this.H();this.readyState==this.CONNECTING&&(this.readyState=this.OPEN,this.dispatchEvent("open",{type:"open"}));var c=a.A();c.length>this.m&&(this.log("buffer.length > this.bufferSizeLimit"),
this.j());0==this.cursor&&0<c.length&&"\ufeff"==c.substring(0,1)&&(this.cursor=1);var b=this.M(c);b[0]>=this.cursor&&(b=b[1],this.P(c.substring(this.cursor,b)),this.cursor=b);a.C()&&(this.log("request.isDone(). reopening the connection"),this.j(this.interval))}else this.readyState!==this.CLOSED&&(this.log("this.readyState !== this.CLOSED"),this.j(this.interval))},P:function(a){a=this.cache+this.O(a);a=a.split("\n\n");var c,b,d,e,f;for(c=0;c<a.length-1;c++){d="message";e=[];parts=a[c].split("\n");
for(b=0;b<parts.length;b++)f=this.S(parts[b]),0==f.indexOf("event")?d=f.replace(/event:?\s*/,""):0==f.indexOf("retry")?(f=parseInt(f.replace(/retry:?\s*/,"")),isNaN(f)||(this.interval=f)):0==f.indexOf("data")?e.push(f.replace(/data:?\s*/,"")):0==f.indexOf("id:")?this.lastEventId=f.replace(/id:?\s*/,""):0==f.indexOf("id")&&(this.lastEventId=null);e.length&&this.dispatchEvent(d,new k(d,e.join("\n"),this.lastEventId))}this.cache=a[a.length-1]},dispatchEvent:function(a,c){var b=this["_"+a+"Handlers"];
if(b)for(var d=0;d<b.length;d++)b[d].call(this,c);this["on"+a]&&this["on"+a].call(this,c)},addEventListener:function(a,c){this["_"+a+"Handlers"]||(this["_"+a+"Handlers"]=[]);this["_"+a+"Handlers"].push(c)},removeEventListener:function(a,c){var b=this["_"+a+"Handlers"];if(b)for(var d=b.length-1;0<=d;--d)if(b[d]===c){b.splice(d,1);break}},i:null,c:null,lastEventId:null,cache:"",cursor:0,onerror:null,onmessage:null,onopen:null,readyState:0,I:function(a,c){var b=[];if(c){var d,e,f=encodeURIComponent;
for(d in c)c.hasOwnProperty(d)&&(e=f(d)+"="+f(c[d]),b.push(e))}return 0<b.length?-1==a.indexOf("?")?a+"?"+b.join("&"):a+"&"+b.join("&"):a},M:function(a){var c=a.lastIndexOf("\n\n"),b=a.lastIndexOf("\r\r");a=a.lastIndexOf("\r\n\r\n");return a>Math.max(c,b)?[a,a+4]:[Math.max(c,b),Math.max(c,b)+2]},S:function(a){return a.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")},O:function(a){return a.replace(/\r\n|\r/g,"\n")}};if(window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType){e.L=
"IE_8-9";var h=e.prototype.w;h.J=null;h.f.evs_preamble=2056;e.prototype.h=function(a){this.a=request=new XDomainRequest;request.onprogress=function(){request.u=!0;a.l()};request.onload=function(){this.s=!0;a.l()};request.onerror=function(){this.b=!0;a.readyState=a.CLOSED;a.dispatchEvent("error",{type:"error",data:"XDomainRequest error"})};request.ontimeout=function(){this.b=!0;a.readyState=a.CLOSED;a.dispatchEvent("error",{type:"error",data:"XDomainRequest timed out"})};var c={};if(a.f){var b=a.f,
d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);a.lastEventId&&(c.evs_last_event_id=a.lastEventId)}request.open("GET",a.I(a.URL,c));request.send()};e.prototype.h.prototype={a:null,u:!1,s:!1,b:!1,D:function(){return this.a.u},C:function(){return this.a.s},B:function(){return this.a.b},A:function(){var a="";try{a=this.a.responseText||""}catch(c){}return a},abort:function(){this.a&&this.a.abort()}}}else e.L="XHR",e.prototype.h=function(a){this.a=request=new XMLHttpRequest;a.c=this;request.onreadystatechange=
function(){1<request.readyState&&a.readyState!=a.CLOSED&&(200==request.status||300<=request.status&&400>request.status?a.l():(request.b=!0,a.readyState=a.CLOSED,a.dispatchEvent("error",{type:"error",data:"The server responded with "+request.status}),a.close()))};request.onprogress=function(){};request.open("GET",a.I(a.URL,a.f),!0);var c=a.J,b;for(b in c)c.hasOwnProperty(b)&&request.setRequestHeader(b,c[b]);a.lastEventId&&request.setRequestHeader("Last-Event-Id",a.lastEventId);request.send()},e.prototype.h.prototype=
{a:null,b:!1,D:function(){return 2<=this.a.readyState},C:function(){return 4==this.a.readyState},B:function(){return this.b||400<=this.a.status},A:function(){var a="";try{a=this.a.responseText||""}catch(c){}return a},abort:function(){this.a&&this.a.abort()}};g[l]=e}})(this);

function m(c,e){return function(){return c.apply(e,arguments)}}var t=[].indexOf||function(c){for(var e=0,p=this.length;e<p;e++)if(e in this&&this[e]===c)return e;return-1},A=[].slice;window.u||(window.u={});
window.u.P=function(){function c(a){var b,d,f;this.options=null!=a?a:{};this.C=m(this.C,this);this.j=m(this.j,this);this.D=m(this.D,this);this.v=m(this.v,this);this.o=m(this.o,this);this.A=m(this.A,this);this.F=m(this.F,this);this.w=m(this.w,this);f=["hostname","selector"];d=null==this.options;a=0;for(b=f.length;a<b;a++)d=f[a],d=!(d in this.options);this.options==={}||d?q("Options missing or invalid"):(a={ssl:!0,css:!0,debug:!1,linkTarget:"_blank",display:{hideOnError:!0,pane:!0,ledOnly:!1,panePosition:"bottom-right",
ledPosition:"left"},i18n:{heading:"Issues",loading:"Loading status...",error:"Connection error",issue:{scheduled:"Scheduled",empty:{operational:"There are currently no reported issues.",degraded:"There are currently no reported issues, but we have detected that at least one component is degraded.",outage:"There are currently no reported issues, but we have detected outages on at least one component."}},linkBack:"View Status Page"}},this.options=v(a,this.options),this.debug=this.options.debug,this.hostname=
this.options.hostname,this.display=this.options.display,this.a=this.options.i18n,/^https?:\/\//i.test(this.hostname)||(a=this.options.ssl?"https":"http",this.hostname=a+"://"+this.hostname),this.f={},this.h=[],this.ready(function(a){return function(){return a.S()}}(this)))}var e,p,w,v,x,r,l,h,y,g,z,q;c.prototype.ready=function(a){return"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)};c.prototype.W=function(){var a;a=document.createElement("link");a.rel="stylesheet";
a.href="https://libraries.hund.io/status-js/status-3.4.3.css";document.head.appendChild(a)};c.prototype.S=function(){var a;this.elements={};a=this.options.selector;this.elements.g=document.querySelector(a);this.J("hidden");if(null===this.elements.g)q("Unable to find element with selector: "+a);else if(this.options.css&&this.W(),this.connect(),e(this.elements.g,"status-widget"),this.elements.l=this.c("span",this.elements.g,"led"),this.display.ledOnly||(this.elements.state=this.c("span",this.elements.g,
"state"),g(this.elements.state,this.a.loading)),"left"!==this.display.ledPosition&&this.elements.g.appendChild(this.elements.l),this.elements.b=this.c("div",this.elements.g,"pane"),h(this.elements.b,"open",!1),h(this.elements.b,"position",this.display.panePosition),this.elements.Z=this.c("strong",this.elements.b,"pane__heading"),g(this.elements.Z,this.a.heading),this.elements.G=this.c("div",this.elements.b,"pane__container"),this.elements.I=this.c("span",this.elements.G,"pane__text"),g(this.elements.I,
this.a.loading),this.elements.N=this.c("a",this.elements.b,"pane__footer"),this.L(this.elements.N,this.hostname),g(this.elements.N,this.a.linkBack),this.display.pane)return e(this.elements.g,"status_widget--pane-enabled"),window.addEventListener("resize",this.V(this.K)),this.elements.g.addEventListener("click",function(a){return function(d){d.preventDefault();d.stopPropagation();return h(a.elements.b,"open","false"===a.elements.b.dataset.open)}}(this),!1),this.elements.b.addEventListener("click",
function(a){return a.stopPropagation()}),document.addEventListener("click",function(a){return function(){if(a.elements.b.dataset.open)return h(a.elements.b,"open",!1)}}(this),!1)};c.prototype.J=function(a){return this.elements.g.style.visibility=a};c.prototype.connect=function(){var a;return window.EventSource?(a=this.hostname+"/live/v2/",a=null!=this.options.component?a+("component/"+this.options.component):a+"status_page",this.source=new window.EventSource(a),this.source.onerror=this.w,this.source.onopen=
this.F,this.R()):l("Browser unsupported")};c.prototype.$=function(a){null==a&&(a=0);clearTimeout(this.aa);this.aa=setTimeout(function(a){return function(){a.source.close();return a.connect()}}(this),a)};c.prototype.w=function(){var a;0<this.m||(this.m=0);a=p(this.m);this.debug&&l("Reconnecting in "+a+"ms");this.$(a);this.m+=1;h(this.elements.l("state","pending"));if(!this.display.hideOnError&&(this.J("visible"),a=1E4<a?this.a.error:this.a.loading,this.elements.state))return g(this.elements.state,
a)};c.prototype.F=function(){this.m=0;l("Connected");return this.J("visible")};c.prototype.R=function(){var a,b,d,f;b={init_event:this.A,status_created:this.o,degraded:this.o,restored:this.o,issue_created:this.v,issue_updated:this.D,issue_resolved:this.j,issue_reopened:this.C,issue_cancelled:this.j,issue_started:this.v,issue_ended:this.j};f=[];for(a in b)d=b[a],f.push(this.source.addEventListener(a,d,!1));return f};c.prototype.A=function(a){var b,d,f;a=this.i(a);if("issues"in a)for(this.f={},this.h=
[],f=a.issues,a=0,d=f.length;a<d;a++)b=f[a],this.B(b);return this.s()};c.prototype.o=function(a){return this.i(a)};c.prototype.v=function(a){a=this.i(a);"issue"in a&&(a.issue.updates=[],this.B(a.issue));return this.s()};c.prototype.D=function(a){var b;a=this.i(a);if("update"in a&&(b=a.update.issue_id,b in this.f))return this.f[b].updates.unshift(a.update),this.s()};c.prototype.j=function(a){var b;a=this.i(a);b="";"update"in a?b=a.update.issue_id:"issue"in a&&(b=a.issue.id);if(b in this.f)return this.ba(b),
this.s()};c.prototype.C=function(a){a=this.i(a);"update"in a&&this.B(a.update.issue);return this.s()};c.prototype.parse=function(a){try{if("data"in a)return JSON.parse(a.data)}catch(b){q("Received invalid event payload")}return{}};c.prototype.i=function(a){a=this.parse(a);this.ca(a.state);return a};c.prototype.ca=function(a){var b;null==a&&(a="pending");h(this.elements.l,"state",a);null!=this.elements.state&&(b=a,"state"in this.a&&a in this.a.state&&(b=this.a.state[a]),g(this.elements.state,b),this.K());
this.state=a;this.O()};c.prototype.s=function(){var a,b,d,f,c;null!=this.elements.H&&this.elements.G.removeChild(this.elements.H);this.elements.H=this.c("div",this.elements.G,"pane__issues");if(this.M()){h(this.elements.I,"hidden",!0);f=this.h;c=[];a=0;for(d=f.length;a<d;a++)b=f[a],b in this.f&&c.push(this.T(this.f[b]));return c}this.O()};c.prototype.O=function(){this.M()||g(this.elements.I,this.a.issue.empty[this.state])};c.prototype.B=function(a){var b;b=a.id;this.f[b]=a;0<=t.call(this.h,b)||this.h.splice(this.Y(b),
0,b)};c.prototype.ba=function(a){delete this.f[a];0>t.call(this.h,a)||this.h.splice(this.h.indexOf(a),1)};c.prototype.T=function(a){var b,d,f,c;b=this.c("div",this.elements.H,"issue");d=this.X(a);d={components:{el:"strong",text:a.components.map(function(a){return a.name}).join(", ")},title:{el:"a",text:a.title+": "},body:{el:"p",html:d.body},label:{el:"span",text:d.label},time:{el:"span",text:d.U}};for(f in d)c=d[f],d[f]=this.c(c.el,b,"issue__"+f),"html"in c?y(d[f],c.html):g(d[f],c.text);return this.L(d.title,
this.hostname+"/issues/"+a.id)};c.prototype.X=function(a){var b,d,c,e,n;n=!!a.standing;e=!!a.scheduled;b=0<a.updates.length;e&&(n||(c=this.a.issue.scheduled),d=a.starts_at);b&&(a=a.updates[0]);b=a.body;n&&(c=a.label);e||(d=a.created_at);d=new Date(1E3*d);z()&&"dates"in this.a?(a=this.a.dates,d=d.toLocaleString(a.locale,a.options)):d=d.toLocaleString();return{body:b,label:c,U:d}};c.prototype.Y=function(a){var b,d,c,e,n,g,k;e=Math.floor(Date.now()/1E3);k={past:[],future:[]};c=0;n=this.f;for(b in n)d=
n[b],g=(g=!!d.scheduled)?d.starts_at:d.created_at,k[g>e?"future":"past"].push(g),d.id===a&&(c=g);return 0<=t.call(k.future,c)?k.future.sort().indexOf(c)+k.past.length:k.past.sort().reverse().indexOf(c)};c.prototype.M=function(){return 0!==Object.keys(this.f).length};c.prototype.c=function(a,b,d){var c;null==d&&(d=void 0);c="status-widget";null!=d&&(c+="__"+d);return w(a,c,b)};c.prototype.L=function(a,b){a.href=b;a.target=this.options.linkTarget;return a.rel="noopener"};c.prototype.K=function(){var a;
a=this.elements.l.offsetLeft;x(this.display.panePosition,"left")?(a-=this.elements.b.offsetWidth,a+=20+this.elements.l.offsetWidth):a-=20;return this.elements.b.style.left=a+"px"};c.prototype.V=function(a){var b;b=null;return function(d){return function(){var c;c=1<=arguments.length?A.call(arguments,0):[];b&&clearTimeout(b);return b=setTimeout(function(){a.apply(d,c);return b=null},250)}}(this)};e=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b};w=function(a,b,d){a=document.createElement(a);
e(a,b);d.appendChild(a);return a};g=function(a,b){return void 0!==typeof a.textContent?a.textContent=b:a.innerText=b};y=function(a,b){a.innerHTML=b};h=function(a,b,d){return a.setAttribute("data-"+b,d)};z=function(){return!1};x=function(a,b){return-1!==a.indexOf(b,a.length-b.length)};p=function(a,b,d){null==b&&(b=100);null==d&&(d=6E4);return Math.max(Math.min(1E3*r(a),d),b)};r=function(a){return 2>a?a:r(a-1)+r(a-2)};v=function(a,b){var d,c,e,g,h,k,l;d={};h=Object.keys(a).concat(Object.keys(b));c=
0;for(g=h.length;c<g;c++)e=h[c],l=a[e],k=b[e],d[e]=null!=k?"object"===typeof k?v(l||{},k||{}):k:l;return d};l=function(a,b){null==b&&(b="log");return console[b]("[Status Widget] "+a)};q=function(a){l(a,"warn")};return c}();window.Status=window.u;window.Status.Widget=window.u.P;
