 (function(g){function k(a,c,b){var d=window.location.origin;this.cancelable=this.cancelBubble=this.bubbles=!1;this.data=c||null;this.origin=d||"";this.lastEventId=b||"";this.type=a||"message"}if(!g.EventSource||g.K){var l=(g.K||"")+"EventSource",e=function(a,c){if(!a||"string"!=typeof a)throw new SyntaxError("Not enough arguments");this.URL=a;this.R(c);var b=this;setTimeout(function(){b.G()},0)};e.prototype={CONNECTING:0,OPEN:1,CLOSED:2,w:{F:!1,N:"eventsource",interval:500,m:262144,o:3E5,f:{evs_buffer_size_limit:262144},
J:{Accept:"text/event-stream","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}},R:function(a){var c=this.w,b;for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b]);for(b in a)b in c&&a.hasOwnProperty(b)&&(this[b]=a[b]);this.f&&this.m&&(this.f.evs_buffer_size_limit=this.m);if("undefined"===typeof console||"undefined"===typeof console.log)this.F=!1},log:function(a){this.F&&console.log("["+this.N+"]:"+a)},G:function(){try{this.readyState!=this.CLOSED&&(this.v(),this.readyState=this.CONNECTING,
this.cursor=0,this.cache="",this.c=new this.h(this),this.H())}catch(a){this.log("There were errors inside the pool try-catch"),this.dispatchEvent("error",{type:"error",data:a.message})}},j:function(a){var c=this;c.readyState=c.CONNECTING;c.dispatchEvent("error",{type:"error",data:"Reconnecting "});this.i=setTimeout(function(){c.G()},a||0)},v:function(){this.log("evs cleaning up");this.i&&(clearInterval(this.i),this.i=null);this.g&&(clearInterval(this.g),this.g=null);this.c&&(this.c.abort(),this.c=
null)},H:function(){if(this.o){this.g&&clearInterval(this.g);var a=this;this.g=setTimeout(function(){a.log("Timeout! silentTImeout:"+a.o);a.j()},this.o)}},close:function(){this.readyState=this.CLOSED;this.log("Closing connection. readyState: "+this.readyState);this.v()},l:function(){var a=this.c;if(a.D()&&!a.B()){this.H();this.readyState==this.CONNECTING&&(this.readyState=this.OPEN,this.dispatchEvent("open",{type:"open"}));var c=a.A();c.length>this.m&&(this.log("buffer.length > this.bufferSizeLimit"),
this.j());0==this.cursor&&0<c.length&&"\ufeff"==c.substring(0,1)&&(this.cursor=1);var b=this.M(c);b[0]>=this.cursor&&(b=b[1],this.P(c.substring(this.cursor,b)),this.cursor=b);a.C()&&(this.log("request.isDone(). reopening the connection"),this.j(this.interval))}else this.readyState!==this.CLOSED&&(this.log("this.readyState !== this.CLOSED"),this.j(this.interval))},P:function(a){a=this.cache+this.O(a);a=a.split("\n\n");var c,b,d,e,f;for(c=0;c<a.length-1;c++){d="message";e=[];parts=a[c].split("\n");
for(b=0;b<parts.length;b++)f=this.S(parts[b]),0==f.indexOf("event")?d=f.replace(/event:?\s*/,""):0==f.indexOf("retry")?(f=parseInt(f.replace(/retry:?\s*/,"")),isNaN(f)||(this.interval=f)):0==f.indexOf("data")?e.push(f.replace(/data:?\s*/,"")):0==f.indexOf("id:")?this.lastEventId=f.replace(/id:?\s*/,""):0==f.indexOf("id")&&(this.lastEventId=null);e.length&&this.dispatchEvent(d,new k(d,e.join("\n"),this.lastEventId))}this.cache=a[a.length-1]},dispatchEvent:function(a,c){var b=this["_"+a+"Handlers"];
if(b)for(var d=0;d<b.length;d++)b[d].call(this,c);this["on"+a]&&this["on"+a].call(this,c)},addEventListener:function(a,c){this["_"+a+"Handlers"]||(this["_"+a+"Handlers"]=[]);this["_"+a+"Handlers"].push(c)},removeEventListener:function(a,c){var b=this["_"+a+"Handlers"];if(b)for(var d=b.length-1;0<=d;--d)if(b[d]===c){b.splice(d,1);break}},i:null,c:null,lastEventId:null,cache:"",cursor:0,onerror:null,onmessage:null,onopen:null,readyState:0,I:function(a,c){var b=[];if(c){var d,e,f=encodeURIComponent;
for(d in c)c.hasOwnProperty(d)&&(e=f(d)+"="+f(c[d]),b.push(e))}return 0<b.length?-1==a.indexOf("?")?a+"?"+b.join("&"):a+"&"+b.join("&"):a},M:function(a){var c=a.lastIndexOf("\n\n"),b=a.lastIndexOf("\r\r");a=a.lastIndexOf("\r\n\r\n");return a>Math.max(c,b)?[a,a+4]:[Math.max(c,b),Math.max(c,b)+2]},S:function(a){return a.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"")},O:function(a){return a.replace(/\r\n|\r/g,"\n")}};if(window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType){e.L=
"IE_8-9";var h=e.prototype.w;h.J=null;h.f.evs_preamble=2056;e.prototype.h=function(a){this.a=request=new XDomainRequest;request.onprogress=function(){request.u=!0;a.l()};request.onload=function(){this.s=!0;a.l()};request.onerror=function(){this.b=!0;a.readyState=a.CLOSED;a.dispatchEvent("error",{type:"error",data:"XDomainRequest error"})};request.ontimeout=function(){this.b=!0;a.readyState=a.CLOSED;a.dispatchEvent("error",{type:"error",data:"XDomainRequest timed out"})};var c={};if(a.f){var b=a.f,
d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);a.lastEventId&&(c.evs_last_event_id=a.lastEventId)}request.open("GET",a.I(a.URL,c));request.send()};e.prototype.h.prototype={a:null,u:!1,s:!1,b:!1,D:function(){return this.a.u},C:function(){return this.a.s},B:function(){return this.a.b},A:function(){var a="";try{a=this.a.responseText||""}catch(c){}return a},abort:function(){this.a&&this.a.abort()}}}else e.L="XHR",e.prototype.h=function(a){this.a=request=new XMLHttpRequest;a.c=this;request.onreadystatechange=
function(){1<request.readyState&&a.readyState!=a.CLOSED&&(200==request.status||300<=request.status&&400>request.status?a.l():(request.b=!0,a.readyState=a.CLOSED,a.dispatchEvent("error",{type:"error",data:"The server responded with "+request.status}),a.close()))};request.onprogress=function(){};request.open("GET",a.I(a.URL,a.f),!0);var c=a.J,b;for(b in c)c.hasOwnProperty(b)&&request.setRequestHeader(b,c[b]);a.lastEventId&&request.setRequestHeader("Last-Event-Id",a.lastEventId);request.send()},e.prototype.h.prototype=
{a:null,b:!1,D:function(){return 2<=this.a.readyState},C:function(){return 4==this.a.readyState},B:function(){return this.b||400<=this.a.status},A:function(){var a="";try{a=this.a.responseText||""}catch(c){}return a},abort:function(){this.a&&this.a.abort()}};g[l]=e}})(this);

function l(d,e){return function(){return d.apply(e,arguments)}}var r=[].indexOf||function(d){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===d)return e;return-1};window.o||(window.o={});
window.o.M=function(){function d(a){var b,c,f,d;this.options=null!=a?a:{};this.s=l(this.s,this);this.u=l(this.u,this);this.j=l(this.j,this);this.i=l(this.i,this);this.A=l(this.A,this);this.C=l(this.C,this);this.w=l(this.w,this);d=["hostname","selector"];f=null==this.options;a=0;for(b=d.length;a<b;a++)f=d[a],f=!(f in this.options);if(this.options==={}||f)p("Initialization options missing or invalid.");else{b={ssl:!0,css:!0,debug:!1,display:{hideOnError:!0,ledOnly:!1,panePosition:"bottom-right",ledPosition:"left"},
i18n:{}};for(c in b)a=b[c],null==this.options[c]&&(this.options[c]=a);b={heading:"Issues",loading:"Loading status...",error:"Connection error",issue:{scheduled:"Scheduled",empty:{operational:"There are currently no reported issues.",degraded:"There are currently no reported issues, but we have detected that at least one component is degraded.",outage:"There are currently no reported issues, but we have detected outages on at least one component."}},linkBack:"View Status Page"};for(c in b)a=b[c],null==
this.options.i18n[c]&&(this.options.i18n[c]=a);this.debug=this.options.debug;this.hostname=this.options.hostname;this.display=this.options.display;this.a=this.options.i18n;/^https?:\/\//i.test(this.hostname)||(c=this.options.ssl?"https":"http",this.hostname=c+"://"+this.hostname);this.c={};this.h=[];this.ready(function(a){return function(){return a.O()}}(this))}}var e,n,t,q,h,u,g,v,p;d.prototype.ready=function(a){return"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",
a)};d.prototype.S=function(){var a;a=document.createElement("link");a.rel="stylesheet";a.href="https://libraries.hund.io/status-js/status-2.3.5-compat.css";document.head.appendChild(a)};d.prototype.O=function(){var a;this.elements={};a=this.options.selector;this.elements.g=document.querySelector(a);this.I("hidden");if(null===this.elements.g)p("Unable to find element with selector: "+a);else return this.options.css&&this.S(),this.connect(),e(this.elements.g,"status-widget"),this.elements.B=this.b("span",
this.elements.g,"led"),this.display.ledOnly||(this.elements.state=this.b("span",this.elements.g,"state"),g(this.elements.state,this.a.loading)),"left"!==this.display.ledPosition&&this.elements.g.appendChild(this.elements.B),this.elements.f=this.b("div",this.elements.g,"pane"),this.elements.f.dataset.open=!1,this.elements.f.dataset.position=this.display.panePosition,this.elements.V=this.b("strong",this.elements.f,"pane__heading"),g(this.elements.V,this.a.heading),this.elements.D=this.b("div",this.elements.f,
"pane__container"),this.elements.H=this.b("span",this.elements.D,"pane__text"),g(this.elements.H,this.a.loading),this.elements.F=this.b("a",this.elements.f,"pane__footer"),this.elements.F.href=this.hostname,this.elements.F.target="status",g(this.elements.F,this.a.linkBack),this.elements.g.addEventListener("click",function(a){return function(c){c.preventDefault();c.stopPropagation();return a.elements.f.dataset.open="false"===a.elements.f.dataset.open}}(this),!1),this.elements.f.addEventListener("click",
function(a){return a.stopPropagation()}),document.addEventListener("click",function(a){return function(){if(a.elements.f.dataset.open)return a.elements.f.dataset.open=!1}}(this),!1)};d.prototype.I=function(a){return this.elements.g.style.visibility=a};d.prototype.connect=function(){var a;return window.EventSource?(a=this.hostname+"/live",null!=this.options.component&&(a+="/"+this.options.component),this.source=new window.EventSource(a),this.source.onerror=this.w,this.source.onopen=this.C,this.N()):
h("Unsupported browser.")};d.prototype.W=function(a){null==a&&(a=0);clearTimeout(this.X);this.X=setTimeout(function(a){return function(){a.source.close();return a.connect()}}(this),a)};d.prototype.w=function(){var a;0<this.m||(this.m=0);a=n(this.m);this.debug&&h("Dropped: Attempting reconnect in "+a+"ms");this.W(a);this.m+=1;this.elements.B.dataset.state="pending";if(!this.display.hideOnError&&(this.I("visible"),a=1E4<a?this.a.error:this.a.loading,this.elements.state))return g(this.elements.state,
a)};d.prototype.C=function(){this.m=0;h("Connected");return this.I("visible")};d.prototype.N=function(){var a,b,c,f;b={init_event:this.A,status_event:this.i,issue_event:this.j,update_event:this.u,status_created:this.i,degraded:this.i,restored:this.i,issue_created:this.j,issue_updated:this.u,issue_resolved:this.s,issue_started:this.j,issue_ended:this.s};f=[];for(a in b)c=b[a],f.push(this.source.addEventListener(a,c,!1));return f};d.prototype.A=function(a){var b,c,f;a=this.l(a);if("issues"in a)for(this.c=
{},this.h=[],f=a.issues,a=0,c=f.length;a<c;a++)b=f[a],this.J(b);return this.v()};d.prototype.i=function(a){return this.l(a)};d.prototype.j=function(a){a=this.l(a);"issue"in a&&(a.issue.updates=[],this.J(a.issue));return this.v()};d.prototype.u=function(a){var b;a=this.l(a);if("update"in a&&(b=a.update.issue_id,b in this.c))return this.c[b].updates.unshift(a.update),this.v()};d.prototype.s=function(a){var b;a=this.l(a);b="";"update"in a?b=a.update.issue_id:"issue"in a&&(b=a.issue.id);if(b in this.c)return this.Y(b),
this.v()};d.prototype.parse=function(a){try{if("data"in a)return JSON.parse(a.data)}catch(b){p("Received invalid event payload.")}return{}};d.prototype.l=function(a){a=this.parse(a);this.Z(a.state);return a};d.prototype.Z=function(a){var b;null==a&&(a="pending");this.elements.B.dataset.state=a;null!=this.elements.state&&(b=a,"state"in this.a&&a in this.a.state&&(b=this.a.state[a]),g(this.elements.state,b));this.state=a;this.L()};d.prototype.v=function(){var a,b,c,f,d;null!=this.elements.G&&this.elements.D.removeChild(this.elements.G);
this.elements.G=this.b("div",this.elements.D,"pane__issues");if(this.K()){this.elements.H.dataset.hidden=!0;f=this.h;d=[];a=0;for(c=f.length;a<c;a++)b=f[a],b in this.c&&d.push(this.P(this.c[b]));return d}this.L()};d.prototype.L=function(){this.K()||g(this.elements.H,this.a.issue.empty[this.state])};d.prototype.J=function(a){var b;b=a.id;this.c[b]=a;0<=r.call(this.h,b)||this.h.splice(this.U(b),0,b)};d.prototype.Y=function(a){delete this.c[a];0>r.call(this.h,a)||this.h.splice(this.h.indexOf(a),1)};
d.prototype.P=function(a){var b,c,d,k;b=this.b("div",this.elements.G,"issue");c=this.T(a);c={components:{el:"strong",text:void 0},title:{el:"a",text:a.title+": "},body:{el:"p",html:c.body},label:{el:"span",text:c.label},time:{el:"span",text:c.R}};c.components.text="component"in a?a.component:a.components.map(function(a){return a.name}).join(", ");for(d in c)k=c[d],c[d]=this.b(k.el,b,"issue__"+d),"html"in k?u(c[d],k.html):g(c[d],k.text);c.title.href=this.hostname+"/issues/"+a.id;return c.title.target=
"status"};d.prototype.T=function(a){var b,c,d,k,e;e=!!a.standing;k=!!a.scheduled;b=0<a.updates.length;k&&(e||(d=this.a.issue.scheduled),c=a.starts_at);b&&(a=a.updates[0]);b=a.body;e&&(d=a.label);k||(c=a.created_at);c=new Date(1E3*c);v()&&"dates"in this.a?(a=this.a.dates,c=c.toLocaleString(a.locale,a.options)):c=c.toLocaleString();return{body:b,label:d,R:c}};d.prototype.U=function(a){var b,c,d,e,g,h,m;e=Math.floor(Date.now()/1E3);m={past:[],future:[]};d=0;g=this.c;for(b in g)c=g[b],h=(h=!!c.scheduled)?
c.starts_at:c.created_at,m[h>e?"future":"past"].push(h),c.id===a&&(d=h);return 0<=r.call(m.future,d)?m.future.sort().indexOf(d)+m.past.length:m.past.sort().reverse().indexOf(d)};d.prototype.b=function(a,b,c){var d;null==c&&(c=void 0);d="status-widget";null!=c&&(d+="__"+c);return t(a,d,b)};d.prototype.K=function(){return 0!==Object.keys(this.c).length};e=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b};t=function(a,b,c){a=document.createElement(a);e(a,b);c.appendChild(a);return a};
g=function(a,b){return void 0!==typeof a.textContent?a.textContent=b:a.innerText=b};u=function(a,b){a.innerHTML=b};v=function(){return!1};n=function(a,b,c){null==b&&(b=100);null==c&&(c=6E4);return Math.max(Math.min(1E3*q(a),c),b)};q=function(a){return 2>a?a:q(a-1)+q(a-2)};h=function(a,b){null==b&&(b="log");return console[b]("[Status Widget] "+a)};p=function(a){h(a,"warn")};return d}();window.Status=window.o;window.Status.Widget=window.o.M;
